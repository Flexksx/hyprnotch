@use "./colors.scss" as *;
@use "./components/border_rounding.scss" as *;
@use "sass:color";

$base_item_padding: 4px;
$button_width: 30px;
$focused_width: 40px;

%system-tray-base {
  margin: 0px;
  border: 0px;
}

@mixin fast-transition {
  transition: min-width $expressive_fast_spatial_duration
      $expressive_fast_spatial,
    min-height $expressive_fast_spatial_duration $expressive_fast_spatial,
    border-radius $expressive_fast_spatial_duration $expressive_fast_spatial,
    background-color $expressive_default_effects_duration
      $expressive_default_effects;
}

@mixin slow-transition {
  transition: min-width $expressive_slow_spatial_duration
      $expressive_slow_spatial,
    min-height $expressive_slow_spatial_duration $expressive_slow_spatial,
    border-radius $expressive_slow_spatial_duration $expressive_slow_spatial,
    background-color $expressive_default_effects_duration
      $expressive_default_effects,
    padding $expressive_slow_spatial_duration $expressive_slow_spatial;
}

.system_tray_bar_container {
  @extend %system-tray-base;
  @include slow-transition;

  background-color: $surface;
  border-radius: 0px;
  padding: 2px;
  min-height: 32px;

  &.notch-focused {
    border-radius: 0 0 $m3_shape_corner_large $m3_shape_corner_large;
  }
}

// Base tray item styles
.system_tray_item {
  @extend %system-tray-base;
  @include fast-transition;

  background-color: $primary;
  color: $on_primary;
  border-radius: $m3_shape_corner_small;
  padding: 0px $base_item_padding;
  margin: 0px 1px;
  font-size: 16px;
  min-height: $button_width;

  &:hover,
  &.active {
    min-width: $focused_width;
  }

  &:hover {
    background-color: $secondary;
    color: $on_secondary;
    border-radius: $m3_shape_corner_large;
  }

  &.active {
    background-color: $surface;
    color: $primary;
    border-radius: $m3_shape_corner_large $m3_shape_corner_large 0px 0px;
  }

  &.first {
    border-radius: $m3_shape_corner_large $m3_shape_corner_small
      $m3_shape_corner_small $m3_shape_corner_large;

    &:hover,
    &.active {
      border-radius: $m3_shape_corner_large;
    }

    &.active {
      border-radius: $m3_shape_corner_large $m3_shape_corner_large 0px 0px;
    }
  }

  &.last {
    border-radius: $m3_shape_corner_small $m3_shape_corner_large
      $m3_shape_corner_large $m3_shape_corner_small;

    &:hover,
    &.active {
      border-radius: $m3_shape_corner_large;
    }

    &.active {
      border-radius: $m3_shape_corner_large $m3_shape_corner_large 0px 0px;
    }
  }
}

.system_tray_bar_notch {
  @extend %system-tray-base;
  @include slow-transition;

  background-color: transparent;
  min-height: 0px;
  padding: 0px;
  border-radius: 0px 0px 0px $m3_shape_corner_large;

  &.focused {
    background-color: $surface;
    min-height: 40px;
    border-radius: $m3_shape_corner_large;
    padding: 0px 2px;

    &.first {
      border-top-left-radius: 0px;
    }

    &.last {
      border-top-right-radius: 0px;
    }
  }
}

// Notch content
.tray-item-notch-label {
  color: $primary;
}

.system_tray_bar_notch_entry {
  padding: 0px $base_item_padding;
  background-color: transparent;
  color: $primary;
}
